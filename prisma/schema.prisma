generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearchPostgres"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Users {
  id           String @id @default(uuid())
  name         String
  passwordHash String @map("password_hash")

  @@map("users")
}

model Recipes {
  id           String         @id @default(uuid())
  title        String
  price        Decimal
  created      DateTime       @default(now())
  Orders       Orders[]
  RecipesOrder RecipesOrder[]

  @@map("recipes")
}

model Orders {
  id           String  @id @default(uuid())
  customerName String  @map("customer_name")
  quantity     Int
  totalAmount  Decimal
  status       String  @default("pending")

  recipe    Recipes @relation(fields: [recipesId], references: [id])
  recipesId String  @map("recipes_id")

  createdAt    DateTime       @default(now())
  RecipesOrder RecipesOrder[]

  @@map("orders")
}

model RecipesOrder {
  id       String @id @default(uuid())
  quantity Int

  order    Orders @relation(fields: [ordersId], references: [id])
  ordersId String @map("orders_id")

  recipe    Recipes @relation(fields: [recipesId], references: [id])
  recipesId String  @map("recipe_id")

  @@map("recipes_order")
}
